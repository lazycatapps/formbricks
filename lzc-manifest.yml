# app çš„å”¯ä¸€ id,ä¸Šæ¶åˆ°å•†åº—éœ€è¦ä¿è¯ä¸è¦å†²çª,å°½é‡ä½¿ç”¨å¼€å‘è€…è‡ªå·±çš„åŸŸåä½œä¸ºåç¼€.
package: cloud.lazycat.app.liu.formbricks
# app çš„ç‰ˆæœ¬
version: 4.0.1

name: Formbricks
keywords: formbricks, survey, feedback, experience management, user research, analytics, open source
description: å¼€æºä½“éªŒç®¡ç†å¹³å°

# è¯¥åº”ç”¨ä¸æ”¯æŒåœ¨å°åˆ†è¾¨ç‡è®¾å¤‡ä¸Šè¿è¡Œ
unsupported_platforms:                    # ä¸æ”¯æŒçš„å¹³å°åˆ—è¡¨
  - ios
  - android
  - tvos

# è½¯ä»¶åç§°,ä¼šæ˜¾ç¤ºåœ¨å¯åŠ¨å™¨ä¹‹ç±»çš„åœ°æ–¹
locales:
  zh:
    name: Formbricks
    description: |
      ## Formbricks - å¼€æºä½“éªŒç®¡ç†å¹³å°

      **å®˜æ–¹ç½‘ç«™ï¼š** https://formbricks.com/
      **ä»“åº“åœ°å€ï¼š** https://github.com/lazycatapps/formbricks.git

      Formbricks æ˜¯ä¸€ä¸ªå¼€æºçš„ä½“éªŒç®¡ç†å¹³å°,å¸®åŠ©äº§å“å›¢é˜Ÿé€šè¿‡æ·±å…¥äº†è§£ç”¨æˆ·ä½“éªŒæ¥æ‰“é€ æ›´å¥½çš„äº§å“ã€‚å®ƒæä¾›äº†å¼ºå¤§çš„è°ƒç ”å’Œåé¦ˆæ”¶é›†å·¥å…·,è®©æ‚¨èƒ½å¤Ÿåœ¨æ­£ç¡®çš„æ—¶é—´ã€æ­£ç¡®çš„åœ°ç‚¹å‘æ­£ç¡®çš„ç”¨æˆ·æå‡ºæ­£ç¡®çš„é—®é¢˜ã€‚

      ## ä¸»è¦åŠŸèƒ½

      - ğŸ“ åˆ›å»ºå’Œç®¡ç†ç”¨æˆ·è°ƒç ”é—®å·
      - ğŸ¯ ç²¾å‡†çš„ç”¨æˆ·å®šä½å’Œè§¦å‘è§„åˆ™
      - ğŸ“Š å®æ—¶æ•°æ®åˆ†æå’Œå¯è§†åŒ–
      - ğŸ”Œ å¼ºå¤§çš„ API å’Œé›†æˆèƒ½åŠ›
      - ğŸŒ æ”¯æŒå¤šè¯­è¨€,åŒ…å«ä¸­æ–‡ç•Œé¢
      - ğŸ”’ æ•°æ®éšç§ä¿æŠ¤,æ”¯æŒè‡ªæ‰˜ç®¡
      - ğŸ“± è·¨å¹³å°æ”¯æŒ,Web å’Œç§»åŠ¨ç«¯

  en:
    name: Formbricks
    description: |
      ## Formbricks - Open Source Experience Management

      **Official Website:** https://formbricks.com/
      **Repository:** https://github.com/lazycatapps/formbricks.git

      Formbricks is an open-source Experience Management platform that helps product teams build better products through deep user insights. It provides powerful survey and feedback collection tools, enabling you to ask the right questions to the right users at the right time and place.

      ## Main Features

      - ğŸ“ Create and manage user surveys
      - ğŸ¯ Precise user targeting and trigger rules
      - ğŸ“Š Real-time data analysis and visualization
      - ğŸ”Œ Powerful API and integration capabilities
      - ğŸŒ Multi-language support, including Chinese interface
      - ğŸ”’ Data privacy protection, self-hosting support
      - ğŸ“± Cross-platform support, Web and mobile

# è½¯ä»¶æœ¬èº«çš„ license
license: https://github.com/formbricks/formbricks/blob/main/LICENSE

# è½¯ä»¶çš„ä¸»é¡µ,ä¼šåœ¨å•†åº—ç­‰åœ°æ–¹ä½“ç°
homepage: https://github.com/formbricks/formbricks

# lpk çš„ä½œè€…,ä¼šåœ¨å•†åº—ç­‰åœ°æ–¹ä½“ç°
author: liu

# application ä½œä¸ºä¸€ä¸ªç‰¹æ®Šçš„ container è¿è¡Œ,å¯¹åº”çš„ service åç§°ä¸ºå›ºå®šçš„ `app`,å…¶ä»– service å¯ä»¥é€šè¿‡æ­¤åç§°ä¸ app è¿›è¡Œé€šè®¯
application:
  # æ˜¯å¦å­˜åœ¨åå°ä»»åŠ¡,è‹¥å­˜åœ¨åˆ™ç³»ç»Ÿä¸ä¼šå¯¹æ­¤ app è¿›è¡Œä¸»åŠ¨ä¼‘çœ ç­‰æ“ä½œ
  background_task: true

  # æœŸæœ›çš„ app åŸŸå,å¦‚æœç³»ç»Ÿä¸­å·²ç»æœ‰å¯¹åº”åŸŸååˆ™ä¼šæç¤ºç”¨æˆ·é€‰æ‹©å…¶ä»–åŸŸåã€‚æœ€ç»ˆ app åˆ†é…åˆ°çš„åŸŸåä»¥ /lzcapp/run/app.subdomain ä¸ºå‡†
  subdomain: formbricks

  routes:
    - /=http://formbricks:3000

  # é¡µé¢æœ¬èº«æ˜¯æœ‰é‰´æƒçš„ï¼Œæ‰€ä»¥å¯ä»¥ä¸éœ€è¦ lazycat çš„é‰´æƒã€‚
  # å¦‚æœä¸å¼€å¯è¯¥é€‰é¡¹ï¼Œä¼šå¯¼è‡´ OAuth2.0 è®¤è¯å¤±è´¥ï¼Œä¸­é—´å¤šäº†ä¸€ä¸ªé‰´æƒé¡µé¢ã€‚
  public_path:
    - /                         # æ— éœ€ç™»å½•å³å¯è®¿é—®

  depends_on:
    - formbricks

  # å¥åº·æ£€æµ‹é…ç½®
  health_check:
    test_url: http://formbricks:3000
    start_period: 300s

  # æ˜¯å¦å¯ç”¨å¤šå®ä¾‹
  multi_instance: false

services:
  postgres:
    # lzc-cli appstore copy-image pgvector/pgvector:pg17
    image: registry.lazycat.cloud/liu/pgvector/pgvector:b11db79f1fc3520d
    environment:
      - POSTGRES_PASSWORD=postgres
    binds:
      - /lzcapp/var/postgres:/var/lib/postgresql/data
    health_check:
      test:
        - CMD-SHELL
        - pg_isready -U postgres
      start_period: 30s

  redis:
    # lzc-cli appstore copy-image valkey/valkey@sha256:12ba4f45a7c3e1d0f076acd616cb230834e75a77e8516dde382720af32832d6d
    image: registry.lazycat.cloud/liu/valkey/valkey:a5122db61af47bbe
    command: valkey-server --appendonly yes
    binds:
      - /lzcapp/var/redis:/data
    health_check:
      test:
        - CMD
        - valkey-cli
        - ping
      start_period: 10s

  minio:
    # lzc-cli appstore copy-image minio/minio:RELEASE.2024-12-18T00-36-02Z
    image: registry.lazycat.cloud/liu/minio/minio:7f6212a22b140206
    command: server /data --console-address ":9001"
    environment:
      - MINIO_ROOT_USER=formbricks-upload
      - MINIO_ROOT_PASSWORD=formbricks-upload-secret
    binds:
      - /lzcapp/var/minio:/data
    health_check:
      test:
        - CMD-SHELL
        - curl -fsS http://localhost:9000/minio/health/live || exit 1
      start_period: 20s

  formbricks:
    # lzc-cli appstore copy-image ghcr.io/formbricks/formbricks:latest
    image: registry.lazycat.cloud/liu/formbricks/formbricks:b433b8d220d7ee13
    depends_on:
      - postgres
      - redis
      - minio
    binds:
      - /lzcapp/pkg/content/saml-connection:/home/nextjs/apps/web/saml-connection
    environment:
      - WEBAPP_URL=https://${LAZYCAT_APP_DOMAIN}
      - NEXTAUTH_URL=https://${LAZYCAT_APP_DOMAIN}
      - DATABASE_URL=postgresql://postgres:postgres@postgres:5432/formbricks?schema=public
      - NEXTAUTH_SECRET=babce39348293b0f06622d0f2d8e02855c8c095fe69e0e23b88dc699a33e28fd
      - ENCRYPTION_KEY=7816126bd9fb4400b250bac15498d99918919940e9023d647c3da7161c711cbb
      - CRON_SECRET=fdbd9cb72e7010b3fcaad17624b6606a5d72baf93cfe8fd5802222c11c044c05
      - REDIS_URL=redis://redis:6379
      - S3_ACCESS_KEY=formbricks-upload
      - S3_SECRET_KEY=formbricks-upload-secret
      - S3_REGION=us-east-1
      - S3_BUCKET_NAME=formbricks-uploads
      - S3_ENDPOINT_URL=http://minio:9000
      - S3_FORCE_PATH_STYLE=1
      - LOG_LEVEL=info
      - EMAIL_VERIFICATION_DISABLED=1
      - PASSWORD_RESET_DISABLED=1
